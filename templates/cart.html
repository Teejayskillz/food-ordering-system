{% extends "base.html" %}
{% block title %}Cart{% endblock %}
{% block content %}
<h3 class="mb-3">Your Cart</h3>

{% if items %}
  <div class="table-responsive">
    <table class="table align-middle">
      <thead>
        <tr>
          <th>Item</th>
          <th style="width:160px;">Qty</th>
          <th>Price</th>
          <th>Total</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for i in items %}
        <tr>
          <td>{{ i.food.name }}</td>
          <td>
            <form method="post" action="{% url 'orders:update_cart_item' i.id %}" class="d-flex gap-2">
              {% csrf_token %}
              <input class="form-control form-control-sm" type="number" name="quantity" min="1" value="{{ i.quantity }}">
              <button class="btn btn-sm btn-outline-dark">Update</button>
            </form>
          </td>
          <td>₦{{ i.food.price }}</td>
          <td>₦{{ i.line_total }}</td>
          <td>
            <a class="btn btn-sm btn-outline-danger" href="{% url 'orders:remove_cart_item' i.id %}">Remove</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="mt-3">
    <p class="mb-1">Subtotal: <strong>₦{{ subtotal }}</strong></p>
    <p class="mb-1">Delivery: <strong>₦{{ delivery_fee }}</strong></p>
    <p class="fs-5">Total: <strong>₦{{ total }}</strong></p>
    <a class="btn btn-dark" href="{% url 'orders:checkout' %}">Proceed to Checkout</a>
  </div>
{% else %}
  <p>Your cart is empty.</p>
  <a class="btn btn-dark" href="{% url 'menu:menu_list' %}">Go to Menu</a>
{% endif %}

{% endblock %}
